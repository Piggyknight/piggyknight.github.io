<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>[工具-性能]Quest2上使用UnrealInsight的方法 | Pigknight的知识库</title>
  <meta name="keywords" content=" UE , 性能优化 , 工具 ">
  <meta name="description" content="[工具-性能]Quest2上使用UnrealInsight的方法 | Pigknight的知识库">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="categories">
<meta property="og:url" content="http://example.com/categories/index.html">
<meta property="og:site_name" content="Pigknight的知识库">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-02-22T02:31:18.000Z">
<meta property="article:modified_time" content="2023-02-22T02:32:36.645Z">
<meta property="article:author" content="Pigknight">
<meta name="twitter:card" content="summary">


<link rel="icon" href="https://cdn.jsdelivr.net/gh/Piggyknight/pic_bed/%E5%A4%B4%E5%83%8F.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="https://cdn.jsdelivr.net/gh/Piggyknight/pic_bed/%E5%A4%B4%E5%83%8F.png"/>
</a>
<div class="author">
    <span>Pigknight</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/Piggyknight"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <a title="email"
               href="mailto:1524729208@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=1524729208&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(3)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="Client领域">
                        <i class="fold iconfont icon-right"></i>
                        
                        Client领域
                        <small>(3)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="Client领域<--->引擎">
                                        <i class="fold iconfont icon-right"></i>
                                        
                                        引擎
                                        
                                            <small>(3
                                                )</small>
                                        
                                    </div>
                                    
                                        <ul class="sub hide">
                                            
                                                <li>
                                                    <div data-rel="Client领域<--->引擎Unreal">
                                                        <i
                                                                class="fold iconfont icon-right"></i>
                                                        
                                                        Unreal
                                                        
                                                            <small>(3)</small>
                                                        
                                                    </div>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="3">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>工具</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>性能优化</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Crash</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>UE</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="All Client领域 引擎 Unreal 性能优化 VR "
           href="/2023/02/23/Quest2%E4%B8%8A%E4%BD%BF%E7%94%A8UnrealInsight%E6%96%B9%E6%B3%95/"
           data-tag="UE,性能优化,工具"
           data-author="" >
            <span class="post-title" title="[工具-性能]Quest2上使用UnrealInsight的方法">[工具-性能]Quest2上使用UnrealInsight的方法</span>
            <span class="post-date" title="2023-02-23 20:42:13">2023/02/23</span>
        </a>
        
        
        <a  class="All Client领域 引擎 Unreal Crash "
           href="/2023/02/23/%E4%B8%AD%E6%96%AD%E7%82%B9%E5%BC%82%E5%B8%B8-STATUS-BREAKPOINT-0x80000003/"
           data-tag="UE,Crash"
           data-author="" >
            <span class="post-title" title="[crash]中断点异常 STATUS_BREAKPOINT(0x80000003)">[crash]中断点异常 STATUS_BREAKPOINT(0x80000003)</span>
            <span class="post-date" title="2023-02-23 09:41:02">2023/02/23</span>
        </a>
        
        
        <a  class="All Client领域 引擎 Unreal Crash "
           href="/2023/02/22/AsyncLoadingThread-RecursionNotAllowed-Increment%E9%94%99%E8%AF%AF-EngineSubSystem%E4%B8%AD%E8%AF%BB%E5%8F%96%E5%8C%85%E5%90%ABGameplayTag%E7%9A%84DataTable/"
           data-tag="UE,Crash"
           data-author="" >
            <span class="post-title" title="[Crash]AsyncLoadingThread.RecursionNotAllowed.Increment错误">[Crash]AsyncLoadingThread.RecursionNotAllowed.Increment错误</span>
            <span class="post-date" title="2023-02-22 10:08:29">2023/02/22</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Quest2上使用UnrealInsight方法" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">[工具-性能]Quest2上使用UnrealInsight的方法</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Client领域">Client领域</a> > 
            
            <a  data-rel="Client领域&lt;---&gt;引擎">引擎</a> > 
            
            <a  data-rel="Client领域&lt;---&gt;引擎&lt;---&gt;Unreal">Unreal</a> > 
            
            <a  data-rel="Client领域&lt;---&gt;引擎&lt;---&gt;Unreal&lt;---&gt;性能优化">性能优化</a> > 
            
            <a  data-rel="Client领域&lt;---&gt;引擎&lt;---&gt;Unreal&lt;---&gt;性能优化&lt;---&gt;VR">VR</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">UE</a>
            
            <a class="color5">性能优化</a>
            
            <a class="color3">工具</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2023-02-23 21:49:08'>2023-02-23 20:42</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4"><span class="toc-text">详细步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-text">参考</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="详细步骤"><a href="#详细步骤" class="headerlink" title="详细步骤"></a>详细步骤</h3><ul>
<li><p>在源代码引擎目录Engine&#x2F;Build&#x2F;Android&#x2F;UE4Game&#x2F;下获取ue4commandline.txt文件, 文件名大小写无关, 使用时去掉后缀template</p>
<p><img src="https://cdn.jsdelivr.net/gh/Piggyknight/pic_bed/20230223214440.png"></p>
<ul>
<li>文件内部格式如下</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Piggyknight/pic_bed/20230223214330.png"></p>
<p>具体参数参考官方文档,剪切如下</p>
<blockquote>
<ol>
<li><p>Notes on each dir&#x2F;flag shown above:</p>
</li>
<li><ul>
<li><p><strong><ProjectName></strong></p>
</li>
<li><ul>
<li>Just the name of the Unreal project - this will match the entry in &#x2F;sdcard&#x2F;UE4Game&#x2F;<ProjectName></li>
</ul>
</li>
<li><p><strong><UProjectName></strong></p>
</li>
<li><ul>
<li>The UProjectName will match the output binary (dictated by the engine) so you can just use the APK name or find the .uproject file in your game’s directory.</li>
</ul>
</li>
<li><p><strong><MapName></strong></p>
</li>
<li><ul>
<li>This one is optional, but it allows you to customize launch arguments on a per-map basis. If you know the map name, you can just put it here.</li>
<li>Pro Tip: if you have a benchmarking scene that you are using, you can set up tracing for only that map so that the tracing overhead doesn’t affect other profiling on regular maps. This is nice because you can keep that launch arg file in the same location without having to remove or rename it between play types.</li>
</ul>
</li>
<li><p><strong>-trace</strong></p>
</li>
<li><ul>
<li><p>Allows you to define the channels to tap into for the trace. Here are the combinations that I use when profiling:</p>
</li>
<li><ul>
<li><p><strong>Most Detail&#x2F;Most Overhead:</strong> log,counters,cpu,frame,bookmark,file,loadtime, gpu,rhicommands,rendercommands,object</p>
</li>
<li><p><strong>Decent Detail&#x2F;Minimal Overhead:</strong> counters,cpu,frame,bookmark,gpu</p>
</li>
<li><p>Additional:</p>
</li>
<li><ul>
<li><strong>Stats</strong> (experimental statstrace in 4.26 (Enable in code with #define EXPERIMENTAL_STATSTRACE_ENABLED 1 in Engine&#x2F;Source&#x2F;Runtime&#x2F;Core&#x2F;Public&#x2F;Stats&#x2F;StatsTrace.h)</li>
<li><strong>LoadTime</strong> - includes ‘Loading - Main Thread’ and ‘Loading - Async Thread’ tracks</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>-statnamedevents</strong></p>
</li>
<li><ul>
<li>When combined with -trace&#x3D;cpu option this will activate even more CPU timing events</li>
</ul>
</li>
<li><p><strong>-tracehost</strong></p>
</li>
<li><ul>
<li>IP address of the host machine with the Unreal Insights instance running that you want to connect to (127.0.0.1)</li>
</ul>
</li>
<li><p><strong>-tracefile</strong></p>
</li>
<li><ul>
<li><p>Can define a local path on the device that you want to dump the .trace file to as an alternative to live analysis. I keep mine in a static location and just overwrite it each time to always keep a most recent trace.</p>
</li>
<li><ul>
<li>Just ‘adb pull &#x2F;sdcard&#x2F;UE4Game&#x2F;MostRecentTraceCapture.utrace’ to grab it. Can also just put it in project dir so you can keep most recent for each UE title you’re working on</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</blockquote>
<p>其实tracefile不是必须, 实际举例如下</p>
<blockquote>
<p>..&#x2F;..&#x2F;..&#x2F;NextVR&#x2F;NextVR.uproject &#x2F;Game&#x2F;Maps&#x2F;Wharf&#x2F;Demo_Wharf -trace&#x3D;log,counters,cpu,frame,bookmark,file,loadtime,gpu,rhicommands,rendercommands,object -statnamedevents -cpuprofilertrace -tracehost&#x3D;127.0.0.1</p>
</blockquote>
<ul>
<li>通过adb命令将文件上传至相应的项目目录, 如下图</li>
</ul>
<blockquote>
<p>adb push .\ue4commandline.txt &#x2F;sdcard&#x2F;UE4Game&#x2F;<Project Name></p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/Piggyknight/pic_bed/20230223212045.png"></p>
<ul>
<li>运行如下命令, 让adb把相应的数据传到这个UnrealInsight监听的端口, 全小写, 否则会报找不到socket的错误</li>
</ul>
<blockquote>
<p>adb reverse tcp:1980 tcp:1980</p>
</blockquote>
<ul>
<li><p>运行Unreal Insights, 一般在下载到源码引擎目录Engine&#x2F;Binaries&#x2F;Win64&#x2F;下</p>
<p><img src="https://cdn.jsdelivr.net/gh/Piggyknight/pic_bed/20230223212135.png"></p>
</li>
<li><p>勾选Auto选项, 启动Quest 2上的应用, apk版本编译记得一定要使用development版本, 默认shipping版本不支持.</p>
</li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://developer.oculus.com/blog/get-started-with-unreal-insights-on-the-oculus-quest/">https://developer.oculus.com/blog/get-started-with-unreal-insights-on-the-oculus-quest/</a></p>
<p><a target="_blank" rel="noopener" href="https://inu-games.com/2020/01/06/unreal-insights-on-oculus-quest/">https://inu-games.com/2020/01/06/unreal-insights-on-oculus-quest/</a></p>
<p><a target="_blank" rel="noopener" href="https://communityforums.atmeta.com/t5/Unreal-VR-Development/Cannot-connect-Unreal-Insights-with-App-Lab-game-with-Quest-2/td-p/976968">https://communityforums.atmeta.com/t5/Unreal-VR-Development/Cannot-connect-Unreal-Insights-with-App-Lab-game-with-Quest-2/td-p/976968</a></p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 1524729208@qq.com </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2023- Pigknight
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
